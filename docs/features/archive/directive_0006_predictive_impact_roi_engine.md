## Directive 0006: Predictive Impact & ROI Forecasting Engine

### Purpose
Extend the **Living Tech Stack Map (Directive 0005)** with timeline simulation, impact propagation, and business value forecasting. This directive enables users to model system changes, visualize downstream impacts, and forecast when transformation initiatives begin to pay back.

---

### Objectives
1. Introduce time-based simulation to visualize planned system transitions (migrations, decommissions, launches).
2. Forecast ROI at the system, domain, and enterprise levels based on transformation cost vs. realized benefit.
3. Enhance situational awareness with an interactive **Event Log Panel** that narrates cause/effect during simulation.
4. Integrate predictive analytics and ROI visualizations directly into the Living Tech Stack Map.

---

### Core Features

#### 1. Timeline Simulation
- Add a horizontal time slider at the bottom of the Living Map interface.
- Scrubbing through time triggers events such as:
  - `system_decommissioned`
  - `integration_relinked`
  - `system_golive`
  - `domain_modernized`
- Each event animates corresponding node/edge state transitions (fade, color, or size change).
- Events log automatically in `/data/logs/sim_events.json`.

#### 2. Event Log Panel
- New right-hand collapsible panel labeled **Simulation Events**.
- Streams live updates as the simulation progresses.
- Example entries:
  - _2025-06-01 → CRM v1 retired (2 downstream systems impacted)_
  - _2025-09-15 → ERP NextGen Go-Live (3 integrations migrated)_
  - _2026-01-01 → Data Warehouse consolidation completed (ROI threshold reached)_
- Include controls to **filter events** by domain, severity, or impact type.

#### 3. ROI Forecast Visualization
- Extend Recharts integration to show **cumulative cost vs. benefit over time**.
- Add a **break-even marker** when cumulative benefit surpasses cost.
- Data sourced from `/data/roi/forecast.json` generated by backend compute job.
- Support view modes:
  - **Global ROI Curve** (total enterprise)
  - **Domain ROI Curve** (Finance, Ops, Commerce, etc.)
  - **System ROI Detail** (single node focus)

#### 4. Predictive Modeling Hooks
- Connect to D003’s AI Opportunity Index as a feature weight in ROI projections.
- Use basic regression or curve fitting (simple linear model for MVP) to forecast ROI realization date.
- Store computed predictions in `.fuxi/data/insights/roi_predictions.json`.

---

### Implementation Plan (for Codex)
1. **Branch:** `feat/d006_predictive_impact_roi_engine`
2. Extend `/src/components/LivingMap.tsx` with:
   - `TimelineSlider` component (bottom bar)
   - `EventLogPanel` (right collapsible feed)
   - Updated ROI visualization hook linked to simulation time.
3. Create `/src/hooks/useROISimulation.ts` to coordinate time, ROI updates, and event logging.
4. Connect outputs to `.fuxi/data` (simulation logs and forecast data).
5. Ensure simulation runs independently of live integrations.

---

### Safety & Performance
- Ensure simulation state is sandboxed and resets between runs.
- Limit log size to 5,000 events (rotate if exceeded).
- Maintain 60+ FPS under 100-node simulation.
- No external API calls in simulation mode.

---

### Success Criteria
- Timeline simulation animates node transitions with synchronized event log entries.
- ROI curve dynamically updates with simulation timeline.
- Break-even markers visible and accurate per system/domain.
- AI Opportunity weighting reflected in ROI forecasts.
- Logs saved locally and accessible for audit.

---

### Directive Metadata
- **Project:** fuxi_ea  
- **Issued by:** EA Mesh (GPT-5)  
- **Created by Agent:** Fuxi (Architect)  
- **Issued on:** 2025-11-25  
- **Type:** Predictive Directive  
- **Priority:** Critical  
- **Feature Branch:** `feat/d006_predictive_impact_roi_engine`  
- **Auth Mode:** Disabled (FUXI_AUTH_OPTIONAL=true)  
- **Depends On:** D005 – Living Tech Stack Map Engine  
- **Next Step:** Save as `/Users/local8_bill/Projects/fuxi_ea/docs/features/directives/directive_d006_predictive_impact_roi_engine.md`

